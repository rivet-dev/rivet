{
	"$schema": "https://turbo.build/schema.json",
	"extends": ["//"],
	"tasks": {
		"manager-openapi-gen": {
			"inputs": [
				"package.json",
				"packages/rivetkit/src/manager/router.ts"
			],
			"dependsOn": ["build:schema"]
		},
		"dump-asyncapi": {
			"inputs": [
				"package.json",
				"packages/rivetkit/src/manager/router.ts"
			],
			"dependsOn": ["build:schema"]
		},
		"registry-config-schema-gen": {
			"inputs": [
				"package.json",
				"scripts/registry-config-schema-gen.ts",
				"scripts/schema-utils.ts",
				"src/registry/config/index.ts"
			],
			"dependsOn": []
		},
		"actor-config-schema-gen": {
			"inputs": [
				"package.json",
				"scripts/actor-config-schema-gen.ts",
				"scripts/schema-utils.ts",
				"src/actor/config.ts"
			],
			"dependsOn": []
		},
		"build:schema": {
			"dependsOn": ["^build"],
			"inputs": ["schemas/**/*.bare", "scripts/compile-bare.ts"],
			"outputs": ["dist/schemas/**/*.ts"]
		},
		"build:pack-inspector": {
			"dependsOn": ["@rivetkit/engine-frontend#build:inspector"],
			"inputs": ["scripts/pack-inspector.ts", "package.json"],
			"outputs": ["dist/inspector.tar.gz"]
		},
		"build": {
			"dependsOn": [
				"^build",
				"manager-openapi-gen",
				"dump-asyncapi",
				"build:schema",
				"build:browser"
			],
			"inputs": [
				"src/**",
				"tsconfig.json",
				"tsup.config.ts",
				"package.json"
			],
			"outputs": ["dist/tsup/**"],
			"env": ["FAST_BUILD", "CUSTOM_RIVETKIT_DEVTOOLS_URL"]
		},
		"build:browser": {
			"dependsOn": ["build:schema"],
			"inputs": [
				"src/client/mod.browser.ts",
				"src/inspector/mod.browser.ts",
				"src/**",
				"tsconfig.json",
				"tsup.browser.config.ts",
				"package.json"
			],
			"outputs": ["dist/browser/**"],
			"env": ["CUSTOM_RIVETKIT_DEVTOOLS_URL"]
		},
		"test": {
			"dependsOn": ["^test", "build"],
			"inputs": ["src/**", "tests/**", "fixtures/**"]
		},
		"check-types": {
			"dependsOn": ["^build", "build:schema"],
			"inputs": ["src/**", "schemas/**/*.bare", "tsconfig.json"]
		},
		"build:publish": {
			"dependsOn": ["build", "build:pack-inspector"],
			"outputs": []
		}
	}
}
